  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (39.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (44.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreatePosts (20150321145225)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "posts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "perma_id" integer, "title" varchar, "body" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150321145225"]]
  [1m[35m (51.7ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:01:27.615078"], ["updated_at", "2015-03-23 12:01:27.615078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:01:48.347090"], ["updated_at", "2015-03-23 12:01:48.347090"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:02:06.546766"], ["updated_at", "2015-03-23 12:02:06.546766"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:02:21.261066"], ["updated_at", "2015-03-23 12:02:21.261066"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:03:51.347059"], ["updated_at", "2015-03-23 12:03:51.347059"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:04:15.046078"], ["updated_at", "2015-03-23 12:04:15.046078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:04:25.866552"], ["updated_at", "2015-03-23 12:04:25.866552"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:04:44.261074"], ["updated_at", "2015-03-23 12:04:44.261074"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:06:18.990010"], ["updated_at", "2015-03-23 12:06:18.990010"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:06:37.237807"], ["updated_at", "2015-03-23 12:06:37.237807"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:06:57.518705"], ["updated_at", "2015-03-23 12:06:57.518705"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:07:49.839545"], ["updated_at", "2015-03-23 12:07:49.839545"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:12:08.299631"], ["updated_at", "2015-03-23 12:12:08.299631"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:13:02.385748"], ["updated_at", "2015-03-23 12:13:02.385748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:13:30.881750"], ["updated_at", "2015-03-23 12:13:30.881750"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:13:43.191553"], ["updated_at", "2015-03-23 12:13:43.191553"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:15:53.254086"], ["updated_at", "2015-03-23 12:15:53.254086"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:16:13.939859"], ["updated_at", "2015-03-23 12:16:13.939859"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 12:19:04.489096"], ["updated_at", "2015-03-23 12:19:04.489096"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSnapsTags (20150323124051)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "snaps_tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "record_id" integer, "record_type" varchar, "record_perma_id" integer, "tag" varchar, "succeeded_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150323124051"]]
  [1m[36m (33.3ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:36:09.188207"], ["updated_at", "2015-03-23 13:36:09.188207"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:36:09.193216"], ["updated_at", "2015-03-23 13:36:09.193216"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:36:09.196803"], ["updated_at", "2015-03-23 13:36:09.196803"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:16.632161"], ["updated_at", "2015-03-23 13:48:16.632161"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:16.637616"], ["updated_at", "2015-03-23 13:48:16.637616"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:16.640255"], ["updated_at", "2015-03-23 13:48:16.640255"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:16.641937"], ["updated_at", "2015-03-23 13:48:16.641937"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:56.559728"], ["updated_at", "2015-03-23 13:48:56.559728"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:56.565592"], ["updated_at", "2015-03-23 13:48:56.565592"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:56.567792"], ["updated_at", "2015-03-23 13:48:56.567792"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:48:56.574669"], ["updated_at", "2015-03-23 13:48:56.574669"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:59:01.115988"], ["updated_at", "2015-03-23 13:59:01.115988"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:59:01.121472"], ["updated_at", "2015-03-23 13:59:01.121472"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:59:01.124460"], ["updated_at", "2015-03-23 13:59:01.124460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 13:59:01.126013"], ["updated_at", "2015-03-23 13:59:01.126013"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:19:44.189517"], ["updated_at", "2015-03-23 14:19:44.189517"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:19:44.195429"], ["updated_at", "2015-03-23 14:19:44.195429"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:19:44.198985"], ["updated_at", "2015-03-23 14:19:44.198985"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:19:44.202426"], ["updated_at", "2015-03-23 14:19:44.202426"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:19:44.203922"], ["updated_at", "2015-03-23 14:19:44.203922"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.305095"], ["updated_at", "2015-03-23 14:40:24.305095"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.310522"], ["updated_at", "2015-03-23 14:40:24.310522"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.314552"], ["updated_at", "2015-03-23 14:40:24.314552"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.317748"], ["updated_at", "2015-03-23 14:40:24.317748"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.321325"], ["updated_at", "2015-03-23 14:40:24.321325"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:40:24.331275"], ["updated_at", "2015-03-23 14:40:24.331275"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.336066"], ["updated_at", "2015-03-23 14:40:24.336066"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:40:24.337841"], ["updated_at", "2015-03-23 14:40:24.337841"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:24.345243"], ["updated_at", "2015-03-23 14:40:24.345243"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:40:24.347173"], ["updated_at", "2015-03-23 14:40:24.347173"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:50.998974"], ["updated_at", "2015-03-23 14:40:50.998974"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.005072"], ["updated_at", "2015-03-23 14:40:51.005072"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.008467"], ["updated_at", "2015-03-23 14:40:51.008467"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.011906"], ["updated_at", "2015-03-23 14:40:51.011906"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.015504"], ["updated_at", "2015-03-23 14:40:51.015504"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:40:51.017057"], ["updated_at", "2015-03-23 14:40:51.017057"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.023795"], ["updated_at", "2015-03-23 14:40:51.023795"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:40:51.033930"], ["updated_at", "2015-03-23 14:40:51.033930"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:40:51.038074"], ["updated_at", "2015-03-23 14:40:51.038074"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:40:51.039593"], ["updated_at", "2015-03-23 14:40:51.039593"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.142202"], ["updated_at", "2015-03-23 14:41:25.142202"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.148060"], ["updated_at", "2015-03-23 14:41:25.148060"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.151533"], ["updated_at", "2015-03-23 14:41:25.151533"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.154660"], ["updated_at", "2015-03-23 14:41:25.154660"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.157983"], ["updated_at", "2015-03-23 14:41:25.157983"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:41:25.159747"], ["updated_at", "2015-03-23 14:41:25.159747"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.166207"], ["updated_at", "2015-03-23 14:41:25.166207"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:41:25.176292"], ["updated_at", "2015-03-23 14:41:25.176292"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:25.180521"], ["updated_at", "2015-03-23 14:41:25.180521"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:41:25.182077"], ["updated_at", "2015-03-23 14:41:25.182077"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.650140"], ["updated_at", "2015-03-23 14:41:52.650140"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.656047"], ["updated_at", "2015-03-23 14:41:52.656047"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.659154"], ["updated_at", "2015-03-23 14:41:52.659154"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.662256"], ["updated_at", "2015-03-23 14:41:52.662256"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.665910"], ["updated_at", "2015-03-23 14:41:52.665910"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:41:52.667509"], ["updated_at", "2015-03-23 14:41:52.667509"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:41:52.673916"], ["updated_at", "2015-03-23 14:41:52.673916"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:41:52.683919"], ["updated_at", "2015-03-23 14:41:52.683919"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.070592"], ["updated_at", "2015-03-23 14:44:16.070592"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.076511"], ["updated_at", "2015-03-23 14:44:16.076511"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.079686"], ["updated_at", "2015-03-23 14:44:16.079686"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.082825"], ["updated_at", "2015-03-23 14:44:16.082825"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.086480"], ["updated_at", "2015-03-23 14:44:16.086480"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:44:16.096492"], ["updated_at", "2015-03-23 14:44:16.096492"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.100314"], ["updated_at", "2015-03-23 14:44:16.100314"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:44:16.101879"], ["updated_at", "2015-03-23 14:44:16.101879"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:44:16.105672"], ["updated_at", "2015-03-23 14:44:16.105672"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:44:16.107185"], ["updated_at", "2015-03-23 14:44:16.107185"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.408787"], ["updated_at", "2015-03-23 14:45:43.408787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.414688"], ["updated_at", "2015-03-23 14:45:43.414688"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.417806"], ["updated_at", "2015-03-23 14:45:43.417806"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.420969"], ["updated_at", "2015-03-23 14:45:43.420969"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.424496"], ["updated_at", "2015-03-23 14:45:43.424496"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:45:43.434470"], ["updated_at", "2015-03-23 14:45:43.434470"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.438464"], ["updated_at", "2015-03-23 14:45:43.438464"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:45:43.440040"], ["updated_at", "2015-03-23 14:45:43.440040"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:45:43.443785"], ["updated_at", "2015-03-23 14:45:43.443785"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:45:43.445315"], ["updated_at", "2015-03-23 14:45:43.445315"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.757062"], ["updated_at", "2015-03-23 14:46:23.757062"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.762864"], ["updated_at", "2015-03-23 14:46:23.762864"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.766088"], ["updated_at", "2015-03-23 14:46:23.766088"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.769485"], ["updated_at", "2015-03-23 14:46:23.769485"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.772926"], ["updated_at", "2015-03-23 14:46:23.772926"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:46:23.774611"], ["updated_at", "2015-03-23 14:46:23.774611"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.781071"], ["updated_at", "2015-03-23 14:46:23.781071"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:46:23.791274"], ["updated_at", "2015-03-23 14:46:23.791274"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:46:23.795050"], ["updated_at", "2015-03-23 14:46:23.795050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:46:23.796665"], ["updated_at", "2015-03-23 14:46:23.796665"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = posts and snaps_tags.tag = published[0m
SQLite3::SQLException: no such column: posts: SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = posts and snaps_tags.tag = published
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.808536"], ["updated_at", "2015-03-23 14:47:49.808536"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.814308"], ["updated_at", "2015-03-23 14:47:49.814308"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.817443"], ["updated_at", "2015-03-23 14:47:49.817443"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.820483"], ["updated_at", "2015-03-23 14:47:49.820483"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.824038"], ["updated_at", "2015-03-23 14:47:49.824038"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:47:49.825675"], ["updated_at", "2015-03-23 14:47:49.825675"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.833309"], ["updated_at", "2015-03-23 14:47:49.833309"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:47:49.844570"], ["updated_at", "2015-03-23 14:47:49.844570"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:47:49.848395"], ["updated_at", "2015-03-23 14:47:49.848395"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:47:49.849938"], ["updated_at", "2015-03-23 14:47:49.849938"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.081334"], ["updated_at", "2015-03-23 14:56:32.081334"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 14:56:32.085832"], ["updated_at", "2015-03-23 14:56:32.085832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.089357"], ["updated_at", "2015-03-23 14:56:32.089357"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.093238"], ["updated_at", "2015-03-23 14:56:32.093238"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.096431"], ["updated_at", "2015-03-23 14:56:32.096431"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.099731"], ["updated_at", "2015-03-23 14:56:32.099731"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:56:32.101266"], ["updated_at", "2015-03-23 14:56:32.101266"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.107879"], ["updated_at", "2015-03-23 14:56:32.107879"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:56:32.117957"], ["updated_at", "2015-03-23 14:56:32.117957"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:56:32.128940"], ["updated_at", "2015-03-23 14:56:32.128940"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:56:32.130565"], ["updated_at", "2015-03-23 14:56:32.130565"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.294616"], ["updated_at", "2015-03-23 14:58:51.294616"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.300485"], ["updated_at", "2015-03-23 14:58:51.300485"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.303665"], ["updated_at", "2015-03-23 14:58:51.303665"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.306798"], ["updated_at", "2015-03-23 14:58:51.306798"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 14:58:51.309240"], ["updated_at", "2015-03-23 14:58:51.309240"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.312905"], ["updated_at", "2015-03-23 14:58:51.312905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:58:51.323547"], ["updated_at", "2015-03-23 14:58:51.323547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.335758"], ["updated_at", "2015-03-23 14:58:51.335758"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 14:58:51.337466"], ["updated_at", "2015-03-23 14:58:51.337466"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 14:58:51.340824"], ["updated_at", "2015-03-23 14:58:51.340824"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 14:58:51.342396"], ["updated_at", "2015-03-23 14:58:51.342396"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.176553"], ["updated_at", "2015-03-23 15:19:13.176553"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:19:13.181178"], ["updated_at", "2015-03-23 15:19:13.181178"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.184544"], ["updated_at", "2015-03-23 15:19:13.184544"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.188358"], ["updated_at", "2015-03-23 15:19:13.188358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.192278"], ["updated_at", "2015-03-23 15:19:13.192278"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.195720"], ["updated_at", "2015-03-23 15:19:13.195720"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.199218"], ["updated_at", "2015-03-23 15:19:13.199218"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:19:13.201087"], ["updated_at", "2015-03-23 15:19:13.201087"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.207982"], ["updated_at", "2015-03-23 15:19:13.207982"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:19:13.219107"], ["updated_at", "2015-03-23 15:19:13.219107"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:19:13.223336"], ["updated_at", "2015-03-23 15:19:13.223336"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:19:13.225147"], ["updated_at", "2015-03-23 15:19:13.225147"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.037119"], ["updated_at", "2015-03-23 15:21:33.037119"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.042974"], ["updated_at", "2015-03-23 15:21:33.042974"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.046817"], ["updated_at", "2015-03-23 15:21:33.046817"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.049953"], ["updated_at", "2015-03-23 15:21:33.049953"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:21:33.052349"], ["updated_at", "2015-03-23 15:21:33.052349"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.055566"], ["updated_at", "2015-03-23 15:21:33.055566"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.058922"], ["updated_at", "2015-03-23 15:21:33.058922"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:21:33.060479"], ["updated_at", "2015-03-23 15:21:33.060479"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.066806"], ["updated_at", "2015-03-23 15:21:33.066806"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:21:33.077356"], ["updated_at", "2015-03-23 15:21:33.077356"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:21:33.081707"], ["updated_at", "2015-03-23 15:21:33.081707"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:21:33.083356"], ["updated_at", "2015-03-23 15:21:33.083356"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.334269"], ["updated_at", "2015-03-23 15:22:12.334269"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.340691"], ["updated_at", "2015-03-23 15:22:12.340691"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:22:12.343198"], ["updated_at", "2015-03-23 15:22:12.343198"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.346465"], ["updated_at", "2015-03-23 15:22:12.346465"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.349617"], ["updated_at", "2015-03-23 15:22:12.349617"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.352738"], ["updated_at", "2015-03-23 15:22:12.352738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.358145"], ["updated_at", "2015-03-23 15:22:12.358145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:22:12.366815"], ["updated_at", "2015-03-23 15:22:12.366815"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.370925"], ["updated_at", "2015-03-23 15:22:12.370925"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:22:12.372452"], ["updated_at", "2015-03-23 15:22:12.372452"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:22:12.379668"], ["updated_at", "2015-03-23 15:22:12.379668"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:22:12.381305"], ["updated_at", "2015-03-23 15:22:12.381305"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.480529"], ["updated_at", "2015-03-23 15:26:11.480529"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:26:11.485025"], ["updated_at", "2015-03-23 15:26:11.485025"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.488345"], ["updated_at", "2015-03-23 15:26:11.488345"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.492163"], ["updated_at", "2015-03-23 15:26:11.492163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.495306"], ["updated_at", "2015-03-23 15:26:11.495306"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.498649"], ["updated_at", "2015-03-23 15:26:11.498649"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.2ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."perma_id" = 1 LIMIT 1
SQLite3::SQLException: no such column: snaps_tags.perma_id: SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."perma_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.507848"], ["updated_at", "2015-03-23 15:26:11.507848"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:26:11.516925"], ["updated_at", "2015-03-23 15:26:11.516925"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (1.4ms)[0m  SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.531801"], ["updated_at", "2015-03-23 15:26:11.531801"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:26:11.533961"], ["updated_at", "2015-03-23 15:26:11.533961"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:11.538492"], ["updated_at", "2015-03-23 15:26:11.538492"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:26:11.540412"], ["updated_at", "2015-03-23 15:26:11.540412"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.497831"], ["updated_at", "2015-03-23 15:26:37.497831"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.2ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.509056"], ["updated_at", "2015-03-23 15:26:37.509056"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.513123"], ["updated_at", "2015-03-23 15:26:37.513123"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.516213"], ["updated_at", "2015-03-23 15:26:37.516213"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:26:37.518736"], ["updated_at", "2015-03-23 15:26:37.518736"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.522302"], ["updated_at", "2015-03-23 15:26:37.522302"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.525910"], ["updated_at", "2015-03-23 15:26:37.525910"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:26:37.527945"], ["updated_at", "2015-03-23 15:26:37.527945"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.537530"], ["updated_at", "2015-03-23 15:26:37.537530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:26:37.548885"], ["updated_at", "2015-03-23 15:26:37.548885"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:26:37.554389"], ["updated_at", "2015-03-23 15:26:37.554389"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:26:37.556323"], ["updated_at", "2015-03-23 15:26:37.556323"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.368208"], ["updated_at", "2015-03-23 15:31:09.368208"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.374056"], ["updated_at", "2015-03-23 15:31:09.374056"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.377411"], ["updated_at", "2015-03-23 15:31:09.377411"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.380737"], ["updated_at", "2015-03-23 15:31:09.380737"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.384081"], ["updated_at", "2015-03-23 15:31:09.384081"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.387654"], ["updated_at", "2015-03-23 15:31:09.387654"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.391223"], ["updated_at", "2015-03-23 15:31:09.391223"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:31:09.394699"], ["updated_at", "2015-03-23 15:31:09.394699"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.373963"], ["updated_at", "2015-03-23 15:38:22.373963"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.385740"], ["updated_at", "2015-03-23 15:38:22.385740"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1[0m  [["record_perma_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.394321"], ["updated_at", "2015-03-23 15:38:22.394321"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.395538"], ["updated_at", "2015-03-23 15:38:22.395538"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.399485"], ["updated_at", "2015-03-23 15:38:22.399485"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.400729"], ["updated_at", "2015-03-23 15:38:22.400729"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:38:22.403335"], ["updated_at", "2015-03-23 15:38:22.403335"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.404778"], ["updated_at", "2015-03-23 15:38:22.404778"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.408324"], ["updated_at", "2015-03-23 15:38:22.408324"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.409559"], ["updated_at", "2015-03-23 15:38:22.409559"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.413054"], ["updated_at", "2015-03-23 15:38:22.413054"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.414358"], ["updated_at", "2015-03-23 15:38:22.414358"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.418094"], ["updated_at", "2015-03-23 15:38:22.418094"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.419320"], ["updated_at", "2015-03-23 15:38:22.419320"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:38:22.421078"], ["updated_at", "2015-03-23 15:38:22.421078"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.434711"], ["updated_at", "2015-03-23 15:38:22.434711"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.436141"], ["updated_at", "2015-03-23 15:38:22.436141"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:38:22.437643"], ["updated_at", "2015-03-23 15:38:22.437643"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:38:22.440961"], ["updated_at", "2015-03-23 15:38:22.440961"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.442163"], ["updated_at", "2015-03-23 15:38:22.442163"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:38:22.443781"], ["updated_at", "2015-03-23 15:38:22.443781"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:38:22.444923"], ["updated_at", "2015-03-23 15:38:22.444923"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.705109"], ["updated_at", "2015-03-23 15:54:46.705109"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.717457"], ["updated_at", "2015-03-23 15:54:46.717457"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.722473"], ["updated_at", "2015-03-23 15:54:46.722473"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.723713"], ["updated_at", "2015-03-23 15:54:46.723713"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.731840"], ["updated_at", "2015-03-23 15:54:46.731840"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.733150"], ["updated_at", "2015-03-23 15:54:46.733150"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:54:46.735660"], ["updated_at", "2015-03-23 15:54:46.735660"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.737065"], ["updated_at", "2015-03-23 15:54:46.737065"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.740575"], ["updated_at", "2015-03-23 15:54:46.740575"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.741817"], ["updated_at", "2015-03-23 15:54:46.741817"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.745088"], ["updated_at", "2015-03-23 15:54:46.745088"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.746449"], ["updated_at", "2015-03-23 15:54:46.746449"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.750640"], ["updated_at", "2015-03-23 15:54:46.750640"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.752293"], ["updated_at", "2015-03-23 15:54:46.752293"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:54:46.754120"], ["updated_at", "2015-03-23 15:54:46.754120"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.755117"], ["updated_at", "2015-03-23 15:54:46.755117"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.761111"], ["updated_at", "2015-03-23 15:54:46.761111"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.762402"], ["updated_at", "2015-03-23 15:54:46.762402"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:54:46.763963"], ["updated_at", "2015-03-23 15:54:46.763963"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.767398"], ["updated_at", "2015-03-23 15:54:46.767398"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.768581"], ["updated_at", "2015-03-23 15:54:46.768581"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:54:46.770655"], ["updated_at", "2015-03-23 15:54:46.770655"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:54:46.784659"], ["updated_at", "2015-03-23 15:54:46.784659"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:54:46.785997"], ["updated_at", "2015-03-23 15:54:46.785997"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" LEFT JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.353122"], ["updated_at", "2015-03-23 15:55:05.353122"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.364813"], ["updated_at", "2015-03-23 15:55:05.364813"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.369452"], ["updated_at", "2015-03-23 15:55:05.369452"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.370684"], ["updated_at", "2015-03-23 15:55:05.370684"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.378963"], ["updated_at", "2015-03-23 15:55:05.378963"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.380498"], ["updated_at", "2015-03-23 15:55:05.380498"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.384352"], ["updated_at", "2015-03-23 15:55:05.384352"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.385632"], ["updated_at", "2015-03-23 15:55:05.385632"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 15:55:05.388166"], ["updated_at", "2015-03-23 15:55:05.388166"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.389447"], ["updated_at", "2015-03-23 15:55:05.389447"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.392915"], ["updated_at", "2015-03-23 15:55:05.392915"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.394150"], ["updated_at", "2015-03-23 15:55:05.394150"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.398183"], ["updated_at", "2015-03-23 15:55:05.398183"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.399423"], ["updated_at", "2015-03-23 15:55:05.399423"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 15:55:05.401134"], ["updated_at", "2015-03-23 15:55:05.401134"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.402161"], ["updated_at", "2015-03-23 15:55:05.402161"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.408174"], ["updated_at", "2015-03-23 15:55:05.408174"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.409797"], ["updated_at", "2015-03-23 15:55:05.409797"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:55:05.411758"], ["updated_at", "2015-03-23 15:55:05.411758"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.415445"], ["updated_at", "2015-03-23 15:55:05.415445"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.416647"], ["updated_at", "2015-03-23 15:55:05.416647"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 15:55:05.418176"], ["updated_at", "2015-03-23 15:55:05.418176"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 15:55:05.428647"], ["updated_at", "2015-03-23 15:55:05.428647"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 15:55:05.429974"], ["updated_at", "2015-03-23 15:55:05.429974"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.469431"], ["updated_at", "2015-03-23 16:03:41.469431"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.480785"], ["updated_at", "2015-03-23 16:03:41.480785"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1[0m  [["record_perma_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.488985"], ["updated_at", "2015-03-23 16:03:41.488985"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.490225"], ["updated_at", "2015-03-23 16:03:41.490225"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.494182"], ["updated_at", "2015-03-23 16:03:41.494182"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.495329"], ["updated_at", "2015-03-23 16:03:41.495329"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.498706"], ["updated_at", "2015-03-23 16:03:41.498706"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.500102"], ["updated_at", "2015-03-23 16:03:41.500102"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.503541"], ["updated_at", "2015-03-23 16:03:41.503541"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.504712"], ["updated_at", "2015-03-23 16:03:41.504712"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:03:41.507180"], ["updated_at", "2015-03-23 16:03:41.507180"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.508355"], ["updated_at", "2015-03-23 16:03:41.508355"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.511966"], ["updated_at", "2015-03-23 16:03:41.511966"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.513175"], ["updated_at", "2015-03-23 16:03:41.513175"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:03:41.514739"], ["updated_at", "2015-03-23 16:03:41.514739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.528633"], ["updated_at", "2015-03-23 16:03:41.528633"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.530343"], ["updated_at", "2015-03-23 16:03:41.530343"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.535685"], ["updated_at", "2015-03-23 16:03:41.535685"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.537240"], ["updated_at", "2015-03-23 16:03:41.537240"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:03:41.539099"], ["updated_at", "2015-03-23 16:03:41.539099"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.543004"], ["updated_at", "2015-03-23 16:03:41.543004"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.544471"], ["updated_at", "2015-03-23 16:03:41.544471"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:03:41.546801"], ["updated_at", "2015-03-23 16:03:41.546801"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.547992"], ["updated_at", "2015-03-23 16:03:41.547992"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:03:41.549706"], ["updated_at", "2015-03-23 16:03:41.549706"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:03:41.551122"], ["updated_at", "2015-03-23 16:03:41.551122"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:03:41.556330"], ["updated_at", "2015-03-23 16:03:41.556330"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.557816"], ["updated_at", "2015-03-23 16:03:41.557816"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:03:41.559781"], ["updated_at", "2015-03-23 16:03:41.559781"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:03:41.560974"], ["updated_at", "2015-03-23 16:03:41.560974"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.028593"], ["updated_at", "2015-03-23 16:04:12.028593"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.039886"], ["updated_at", "2015-03-23 16:04:12.039886"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1[0m  [["record_perma_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.048241"], ["updated_at", "2015-03-23 16:04:12.048241"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.049484"], ["updated_at", "2015-03-23 16:04:12.049484"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.053437"], ["updated_at", "2015-03-23 16:04:12.053437"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.054606"], ["updated_at", "2015-03-23 16:04:12.054606"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.057966"], ["updated_at", "2015-03-23 16:04:12.057966"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.059163"], ["updated_at", "2015-03-23 16:04:12.059163"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:04:12.061679"], ["updated_at", "2015-03-23 16:04:12.061679"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.062862"], ["updated_at", "2015-03-23 16:04:12.062862"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.066210"], ["updated_at", "2015-03-23 16:04:12.066210"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.067392"], ["updated_at", "2015-03-23 16:04:12.067392"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.070889"], ["updated_at", "2015-03-23 16:04:12.070889"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.072035"], ["updated_at", "2015-03-23 16:04:12.072035"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:04:12.073783"], ["updated_at", "2015-03-23 16:04:12.073783"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.074851"], ["updated_at", "2015-03-23 16:04:12.074851"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.081073"], ["updated_at", "2015-03-23 16:04:12.081073"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.082355"], ["updated_at", "2015-03-23 16:04:12.082355"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:04:12.083863"], ["updated_at", "2015-03-23 16:04:12.083863"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.087098"], ["updated_at", "2015-03-23 16:04:12.087098"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.088303"], ["updated_at", "2015-03-23 16:04:12.088303"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:04:12.090440"], ["updated_at", "2015-03-23 16:04:12.090440"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.091406"], ["updated_at", "2015-03-23 16:04:12.091406"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:04:12.092771"], ["updated_at", "2015-03-23 16:04:12.092771"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:04:12.093965"], ["updated_at", "2015-03-23 16:04:12.093965"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.098217"], ["updated_at", "2015-03-23 16:04:12.098217"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.099386"], ["updated_at", "2015-03-23 16:04:12.099386"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:04:12.100832"], ["updated_at", "2015-03-23 16:04:12.100832"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:04:12.111158"], ["updated_at", "2015-03-23 16:04:12.111158"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:04:12.112379"], ["updated_at", "2015-03-23 16:04:12.112379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.593339"], ["updated_at", "2015-03-23 16:20:04.593339"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.601700"], ["updated_at", "2015-03-23 16:20:04.601700"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.606014"], ["updated_at", "2015-03-23 16:20:04.606014"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.610237"], ["updated_at", "2015-03-23 16:20:04.610237"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.614421"], ["updated_at", "2015-03-23 16:20:04.614421"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.618871"], ["updated_at", "2015-03-23 16:20:04.618871"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.623060"], ["updated_at", "2015-03-23 16:20:04.623060"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.627564"], ["updated_at", "2015-03-23 16:20:04.627564"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.631797"], ["updated_at", "2015-03-23 16:20:04.631797"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:20:04.635601"], ["updated_at", "2015-03-23 16:20:04.635601"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.566586"], ["updated_at", "2015-03-23 16:21:15.566586"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.573735' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.573735' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.577391"], ["updated_at", "2015-03-23 16:21:15.577391"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.578496' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.578496' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.581422"], ["updated_at", "2015-03-23 16:21:15.581422"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.582506' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.582506' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.585496"], ["updated_at", "2015-03-23 16:21:15.585496"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.586582' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.586582' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.589690"], ["updated_at", "2015-03-23 16:21:15.589690"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.590736' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.590736' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.593780"], ["updated_at", "2015-03-23 16:21:15.593780"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.594864' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.594864' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.597995"], ["updated_at", "2015-03-23 16:21:15.597995"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.599074' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.599074' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.601930"], ["updated_at", "2015-03-23 16:21:15.601930"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.603006' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.603006' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.606269"], ["updated_at", "2015-03-23 16:21:15.606269"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.607337' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.607337' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:15.610270"], ["updated_at", "2015-03-23 16:21:15.610270"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.611376' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["record_type", "posts"]]
SQLite3::SQLException: no such column: snaps_tags.record_parma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:15.611376' WHERE "snaps_tags"."record_type" = ? AND "snaps_tags"."record_parma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.608855"], ["updated_at", "2015-03-23 16:21:58.608855"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.616052' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.624076"], ["updated_at", "2015-03-23 16:21:58.624076"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.629747"], ["updated_at", "2015-03-23 16:21:58.629747"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.630835' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.631566"], ["updated_at", "2015-03-23 16:21:58.631566"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:21:58.634045"], ["updated_at", "2015-03-23 16:21:58.634045"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.635127' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.635850"], ["updated_at", "2015-03-23 16:21:58.635850"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.639142"], ["updated_at", "2015-03-23 16:21:58.639142"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.640226' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.640983"], ["updated_at", "2015-03-23 16:21:58.640983"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.644936"], ["updated_at", "2015-03-23 16:21:58.644936"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.646054' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.646804"], ["updated_at", "2015-03-23 16:21:58.646804"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.650050"], ["updated_at", "2015-03-23 16:21:58.650050"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.651130' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.651855"], ["updated_at", "2015-03-23 16:21:58.651855"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.655275"], ["updated_at", "2015-03-23 16:21:58.655275"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.656369' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.657139"], ["updated_at", "2015-03-23 16:21:58.657139"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:21:58.658754"], ["updated_at", "2015-03-23 16:21:58.658754"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.659638' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.660252"], ["updated_at", "2015-03-23 16:21:58.660252"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.665869"], ["updated_at", "2015-03-23 16:21:58.665869"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.666945' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.667723"], ["updated_at", "2015-03-23 16:21:58.667723"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:21:58.669690"], ["updated_at", "2015-03-23 16:21:58.669690"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.670524' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.671135"], ["updated_at", "2015-03-23 16:21:58.671135"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.672358' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:21:58.673049"], ["updated_at", "2015-03-23 16:21:58.673049"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.674124' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:21:58.674787"], ["updated_at", "2015-03-23 16:21:58.674787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.678787"], ["updated_at", "2015-03-23 16:21:58.678787"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.679874' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.680629"], ["updated_at", "2015-03-23 16:21:58.680629"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.681990' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:21:58.682705"], ["updated_at", "2015-03-23 16:21:58.682705"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.685945"], ["updated_at", "2015-03-23 16:21:58.685945"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.686981' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.687706"], ["updated_at", "2015-03-23 16:21:58.687706"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:21:58.697969"], ["updated_at", "2015-03-23 16:21:58.697969"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.699109' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:21:58.699916"], ["updated_at", "2015-03-23 16:21:58.699916"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:21:58.701299' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:21:58.702027"], ["updated_at", "2015-03-23 16:21:58.702027"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.378656"], ["updated_at", "2015-03-23 16:25:25.378656"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.385769' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.393768"], ["updated_at", "2015-03-23 16:25:25.393768"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.398182"], ["updated_at", "2015-03-23 16:25:25.398182"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.399384' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.400149"], ["updated_at", "2015-03-23 16:25:25.400149"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.405365"], ["updated_at", "2015-03-23 16:25:25.405365"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.406582' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.407377"], ["updated_at", "2015-03-23 16:25:25.407377"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.410649"], ["updated_at", "2015-03-23 16:25:25.410649"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.411720' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.412465"], ["updated_at", "2015-03-23 16:25:25.412465"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:25:25.414958"], ["updated_at", "2015-03-23 16:25:25.414958"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.416054' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.416794"], ["updated_at", "2015-03-23 16:25:25.416794"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.420127"], ["updated_at", "2015-03-23 16:25:25.420127"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.421227' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.421977"], ["updated_at", "2015-03-23 16:25:25.421977"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.425512"], ["updated_at", "2015-03-23 16:25:25.425512"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.426632' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.427380"], ["updated_at", "2015-03-23 16:25:25.427380"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.439027"], ["updated_at", "2015-03-23 16:25:25.439027"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.440230' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.441024"], ["updated_at", "2015-03-23 16:25:25.441024"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.442357' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:25.443057"], ["updated_at", "2015-03-23 16:25:25.443057"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.446816"], ["updated_at", "2015-03-23 16:25:25.446816"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.447910' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.448651"], ["updated_at", "2015-03-23 16:25:25.448651"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:25:25.450282"], ["updated_at", "2015-03-23 16:25:25.450282"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.451178' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.451786"], ["updated_at", "2015-03-23 16:25:25.451786"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.453058' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:25.453724"], ["updated_at", "2015-03-23 16:25:25.453724"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.456748"], ["updated_at", "2015-03-23 16:25:25.456748"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.457851' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.458594"], ["updated_at", "2015-03-23 16:25:25.458594"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.459893' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:25.460578"], ["updated_at", "2015-03-23 16:25:25.460578"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:25.463796"], ["updated_at", "2015-03-23 16:25:25.463796"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.464842' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.465635"], ["updated_at", "2015-03-23 16:25:25.465635"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:25:25.467329"], ["updated_at", "2015-03-23 16:25:25.467329"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:25.468210' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:25.468837"], ["updated_at", "2015-03-23 16:25:25.468837"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.028454"], ["updated_at", "2015-03-23 16:25:46.028454"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.035473' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.043367"], ["updated_at", "2015-03-23 16:25:46.043367"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.048067"], ["updated_at", "2015-03-23 16:25:46.048067"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.049352' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.050269"], ["updated_at", "2015-03-23 16:25:46.050269"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.053654"], ["updated_at", "2015-03-23 16:25:46.053654"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.054766' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.055546"], ["updated_at", "2015-03-23 16:25:46.055546"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.058855"], ["updated_at", "2015-03-23 16:25:46.058855"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.059984' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.060800"], ["updated_at", "2015-03-23 16:25:46.060800"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:25:46.063359"], ["updated_at", "2015-03-23 16:25:46.063359"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.064478' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.065291"], ["updated_at", "2015-03-23 16:25:46.065291"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.068710"], ["updated_at", "2015-03-23 16:25:46.068710"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.069909' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.070787"], ["updated_at", "2015-03-23 16:25:46.070787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.076353"], ["updated_at", "2015-03-23 16:25:46.076353"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.077497' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.078414"], ["updated_at", "2015-03-23 16:25:46.078414"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:25:46.080301"], ["updated_at", "2015-03-23 16:25:46.080301"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.081390' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.082021"], ["updated_at", "2015-03-23 16:25:46.082021"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.087663"], ["updated_at", "2015-03-23 16:25:46.087663"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.088746' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.089545"], ["updated_at", "2015-03-23 16:25:46.089545"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:25:46.091131"], ["updated_at", "2015-03-23 16:25:46.091131"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.091978' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.092567"], ["updated_at", "2015-03-23 16:25:46.092567"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.093832' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:46.094510"], ["updated_at", "2015-03-23 16:25:46.094510"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.095570' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:46.096209"], ["updated_at", "2015-03-23 16:25:46.096209"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.100428"], ["updated_at", "2015-03-23 16:25:46.100428"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.101553' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.102283"], ["updated_at", "2015-03-23 16:25:46.102283"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.103552' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:46.104254"], ["updated_at", "2015-03-23 16:25:46.104254"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.107503"], ["updated_at", "2015-03-23 16:25:46.107503"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.108556' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.109332"], ["updated_at", "2015-03-23 16:25:46.109332"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:25:46.119768"], ["updated_at", "2015-03-23 16:25:46.119768"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.120968' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:25:46.121747"], ["updated_at", "2015-03-23 16:25:46.121747"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:25:46.123061' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:25:46.123775"], ["updated_at", "2015-03-23 16:25:46.123775"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.359138"], ["updated_at", "2015-03-23 16:28:27.359138"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.366260' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.374160"], ["updated_at", "2015-03-23 16:28:27.374160"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.379967"], ["updated_at", "2015-03-23 16:28:27.379967"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.381116' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.381884"], ["updated_at", "2015-03-23 16:28:27.381884"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.385847"], ["updated_at", "2015-03-23 16:28:27.385847"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.386955' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.387699"], ["updated_at", "2015-03-23 16:28:27.387699"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.391274"], ["updated_at", "2015-03-23 16:28:27.391274"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.392419' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.393209"], ["updated_at", "2015-03-23 16:28:27.393209"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:28:27.395704"], ["updated_at", "2015-03-23 16:28:27.395704"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.396798' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.397597"], ["updated_at", "2015-03-23 16:28:27.397597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.401029"], ["updated_at", "2015-03-23 16:28:27.401029"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.402129' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.402868"], ["updated_at", "2015-03-23 16:28:27.402868"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.406614"], ["updated_at", "2015-03-23 16:28:27.406614"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.407883' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.408787"], ["updated_at", "2015-03-23 16:28:27.408787"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:28:27.410847"], ["updated_at", "2015-03-23 16:28:27.410847"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.411778' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.412414"], ["updated_at", "2015-03-23 16:28:27.412414"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.418594"], ["updated_at", "2015-03-23 16:28:27.418594"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.419824' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.420683"], ["updated_at", "2015-03-23 16:28:27.420683"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.422083' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:28:27.422828"], ["updated_at", "2015-03-23 16:28:27.422828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.426057"], ["updated_at", "2015-03-23 16:28:27.426057"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.427110' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.427841"], ["updated_at", "2015-03-23 16:28:27.427841"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:28:27.429438"], ["updated_at", "2015-03-23 16:28:27.429438"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.430281' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.430859"], ["updated_at", "2015-03-23 16:28:27.430859"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.432109' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:28:27.432754"], ["updated_at", "2015-03-23 16:28:27.432754"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.433854' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:28:27.434485"], ["updated_at", "2015-03-23 16:28:27.434485"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.438696"], ["updated_at", "2015-03-23 16:28:27.438696"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.439769' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.440526"], ["updated_at", "2015-03-23 16:28:27.440526"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:28:27.442128"], ["updated_at", "2015-03-23 16:28:27.442128"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.442959' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.443535"], ["updated_at", "2015-03-23 16:28:27.443535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.444748' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:28:27.445439"], ["updated_at", "2015-03-23 16:28:27.445439"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.446497' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:28:27.447115"], ["updated_at", "2015-03-23 16:28:27.447115"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.451500"], ["updated_at", "2015-03-23 16:28:27.451500"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.452765' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.453771"], ["updated_at", "2015-03-23 16:28:27.453771"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.455287' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:28:27.456042"], ["updated_at", "2015-03-23 16:28:27.456042"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:28:27.467045"], ["updated_at", "2015-03-23 16:28:27.467045"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:28:27.468216' WHERE "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:28:27.469027"], ["updated_at", "2015-03-23 16:28:27.469027"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.586707"], ["updated_at", "2015-03-23 16:30:11.586707"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.595438' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.604951"], ["updated_at", "2015-03-23 16:30:11.604951"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.610245"], ["updated_at", "2015-03-23 16:30:11.610245"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.611634' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.612588"], ["updated_at", "2015-03-23 16:30:11.612588"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.616416"], ["updated_at", "2015-03-23 16:30:11.616416"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.617828' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.618653"], ["updated_at", "2015-03-23 16:30:11.618653"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.622144"], ["updated_at", "2015-03-23 16:30:11.622144"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.623288' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.624062"], ["updated_at", "2015-03-23 16:30:11.624062"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:30:11.626569"], ["updated_at", "2015-03-23 16:30:11.626569"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.627707' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.628522"], ["updated_at", "2015-03-23 16:30:11.628522"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.631906"], ["updated_at", "2015-03-23 16:30:11.631906"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.633096' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.633900"], ["updated_at", "2015-03-23 16:30:11.633900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.639466"], ["updated_at", "2015-03-23 16:30:11.639466"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.640661' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.641493"], ["updated_at", "2015-03-23 16:30:11.641493"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:30:11.643115"], ["updated_at", "2015-03-23 16:30:11.643115"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.644065' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.644691"], ["updated_at", "2015-03-23 16:30:11.644691"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.650250"], ["updated_at", "2015-03-23 16:30:11.650250"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.651448' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.652280"], ["updated_at", "2015-03-23 16:30:11.652280"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.653722' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:30:11.654378"], ["updated_at", "2015-03-23 16:30:11.654378"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.657502"], ["updated_at", "2015-03-23 16:30:11.657502"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.658628' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.659409"], ["updated_at", "2015-03-23 16:30:11.659409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:30:11.661044"], ["updated_at", "2015-03-23 16:30:11.661044"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.661963' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.662584"], ["updated_at", "2015-03-23 16:30:11.662584"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.663840' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:30:11.664505"], ["updated_at", "2015-03-23 16:30:11.664505"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.665650' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:30:11.666331"], ["updated_at", "2015-03-23 16:30:11.666331"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.670430"], ["updated_at", "2015-03-23 16:30:11.670430"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.671576' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.672357"], ["updated_at", "2015-03-23 16:30:11.672357"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:30:11.673988"], ["updated_at", "2015-03-23 16:30:11.673988"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.674897' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.675515"], ["updated_at", "2015-03-23 16:30:11.675515"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.676840' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:30:11.677528"], ["updated_at", "2015-03-23 16:30:11.677528"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.678634' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:30:11.679271"], ["updated_at", "2015-03-23 16:30:11.679271"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.683482"], ["updated_at", "2015-03-23 16:30:11.683482"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.684659' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.685484"], ["updated_at", "2015-03-23 16:30:11.685484"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.686902' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:30:11.687581"], ["updated_at", "2015-03-23 16:30:11.687581"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:30:11.697984"], ["updated_at", "2015-03-23 16:30:11.697984"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:30:11.699293' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:30:11.700131"], ["updated_at", "2015-03-23 16:30:11.700131"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.292791"], ["updated_at", "2015-03-23 16:32:40.292791"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.300316' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.308702"], ["updated_at", "2015-03-23 16:32:40.308702"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.314591"], ["updated_at", "2015-03-23 16:32:40.314591"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.315869' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.316674"], ["updated_at", "2015-03-23 16:32:40.316674"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.320781"], ["updated_at", "2015-03-23 16:32:40.320781"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.322039' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.322837"], ["updated_at", "2015-03-23 16:32:40.322837"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.326776"], ["updated_at", "2015-03-23 16:32:40.326776"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.327977' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.328780"], ["updated_at", "2015-03-23 16:32:40.328780"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:32:40.331437"], ["updated_at", "2015-03-23 16:32:40.331437"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.332667' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.333528"], ["updated_at", "2015-03-23 16:32:40.333528"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.337044"], ["updated_at", "2015-03-23 16:32:40.337044"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.338272' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.339065"], ["updated_at", "2015-03-23 16:32:40.339065"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.343084"], ["updated_at", "2015-03-23 16:32:40.343084"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.344318' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.345176"], ["updated_at", "2015-03-23 16:32:40.345176"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.346656' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:32:40.347367"], ["updated_at", "2015-03-23 16:32:40.347367"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.350569"], ["updated_at", "2015-03-23 16:32:40.350569"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.351800' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.352634"], ["updated_at", "2015-03-23 16:32:40.352634"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.356319"], ["updated_at", "2015-03-23 16:32:40.356319"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.357615' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.358445"], ["updated_at", "2015-03-23 16:32:40.358445"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:32:40.360108"], ["updated_at", "2015-03-23 16:32:40.360108"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.361171' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.361849"], ["updated_at", "2015-03-23 16:32:40.361849"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.363203' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:32:40.363888"], ["updated_at", "2015-03-23 16:32:40.363888"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.365132' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:32:40.365859"], ["updated_at", "2015-03-23 16:32:40.365859"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.371116"], ["updated_at", "2015-03-23 16:32:40.371116"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.372330' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.373186"], ["updated_at", "2015-03-23 16:32:40.373186"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:32:40.374852"], ["updated_at", "2015-03-23 16:32:40.374852"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.375835' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.376515"], ["updated_at", "2015-03-23 16:32:40.376515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.377929' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:32:40.378638"], ["updated_at", "2015-03-23 16:32:40.378638"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.379820' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:32:40.380521"], ["updated_at", "2015-03-23 16:32:40.380521"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.384693"], ["updated_at", "2015-03-23 16:32:40.384693"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.385937' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.386761"], ["updated_at", "2015-03-23 16:32:40.386761"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.388600' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:32:40.389439"], ["updated_at", "2015-03-23 16:32:40.389439"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:32:40.392850"], ["updated_at", "2015-03-23 16:32:40.392850"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.394087' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.394914"], ["updated_at", "2015-03-23 16:32:40.394914"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:32:40.396577"], ["updated_at", "2015-03-23 16:32:40.396577"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:32:40.397594' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:32:40.398285"], ["updated_at", "2015-03-23 16:32:40.398285"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.031353"], ["updated_at", "2015-03-23 16:33:20.031353"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.038774' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.046739"], ["updated_at", "2015-03-23 16:33:20.046739"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.052458"], ["updated_at", "2015-03-23 16:33:20.052458"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.053698' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.054517"], ["updated_at", "2015-03-23 16:33:20.054517"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.058842"], ["updated_at", "2015-03-23 16:33:20.058842"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.060036' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.060835"], ["updated_at", "2015-03-23 16:33:20.060835"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:33:20.063353"], ["updated_at", "2015-03-23 16:33:20.063353"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.064524' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.065328"], ["updated_at", "2015-03-23 16:33:20.065328"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.068682"], ["updated_at", "2015-03-23 16:33:20.068682"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.069894' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.070682"], ["updated_at", "2015-03-23 16:33:20.070682"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.074203"], ["updated_at", "2015-03-23 16:33:20.074203"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.075373' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.076152"], ["updated_at", "2015-03-23 16:33:20.076152"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.079853"], ["updated_at", "2015-03-23 16:33:20.079853"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.081100' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.081898"], ["updated_at", "2015-03-23 16:33:20.081898"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:33:20.083470"], ["updated_at", "2015-03-23 16:33:20.083470"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.084450' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.085093"], ["updated_at", "2015-03-23 16:33:20.085093"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.086703' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:33:20.087482"], ["updated_at", "2015-03-23 16:33:20.087482"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.088601' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:33:20.090360"], ["updated_at", "2015-03-23 16:33:20.090360"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.095712"], ["updated_at", "2015-03-23 16:33:20.095712"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.096911' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.097752"], ["updated_at", "2015-03-23 16:33:20.097752"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:33:20.099365"], ["updated_at", "2015-03-23 16:33:20.099365"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.100324' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.100970"], ["updated_at", "2015-03-23 16:33:20.100970"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.102271' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:33:20.102936"], ["updated_at", "2015-03-23 16:33:20.102936"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.104036' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:33:20.104673"], ["updated_at", "2015-03-23 16:33:20.104673"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.108651"], ["updated_at", "2015-03-23 16:33:20.108651"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.109878' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.110685"], ["updated_at", "2015-03-23 16:33:20.110685"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.112032' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:33:20.112683"], ["updated_at", "2015-03-23 16:33:20.112683"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.116013"], ["updated_at", "2015-03-23 16:33:20.116013"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.117393' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.118340"], ["updated_at", "2015-03-23 16:33:20.118340"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.128816"], ["updated_at", "2015-03-23 16:33:20.128816"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.130134' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.130966"], ["updated_at", "2015-03-23 16:33:20.130966"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.132367' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:33:20.133063"], ["updated_at", "2015-03-23 16:33:20.133063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:33:20.137363"], ["updated_at", "2015-03-23 16:33:20.137363"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.138529' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.139296"], ["updated_at", "2015-03-23 16:33:20.139296"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:33:20.140962"], ["updated_at", "2015-03-23 16:33:20.140962"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:33:20.141909' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:33:20.142527"], ["updated_at", "2015-03-23 16:33:20.142527"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.334926"], ["updated_at", "2015-03-23 16:34:00.334926"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.342333' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.350284"], ["updated_at", "2015-03-23 16:34:00.350284"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.355963"], ["updated_at", "2015-03-23 16:34:00.355963"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.357182' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.357972"], ["updated_at", "2015-03-23 16:34:00.357972"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:34:00.360372"], ["updated_at", "2015-03-23 16:34:00.360372"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.361575' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.362358"], ["updated_at", "2015-03-23 16:34:00.362358"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.366209"], ["updated_at", "2015-03-23 16:34:00.366209"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.367443' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.368264"], ["updated_at", "2015-03-23 16:34:00.368264"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:34:00.369868"], ["updated_at", "2015-03-23 16:34:00.369868"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.370793' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.371404"], ["updated_at", "2015-03-23 16:34:00.371404"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.372664' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:34:00.373341"], ["updated_at", "2015-03-23 16:34:00.373341"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.374420' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:34:00.375050"], ["updated_at", "2015-03-23 16:34:00.375050"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.380180"], ["updated_at", "2015-03-23 16:34:00.380180"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.381474' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.382378"], ["updated_at", "2015-03-23 16:34:00.382378"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.384057' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:34:00.384769"], ["updated_at", "2015-03-23 16:34:00.384769"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.388037"], ["updated_at", "2015-03-23 16:34:00.388037"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.389269' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.390116"], ["updated_at", "2015-03-23 16:34:00.390116"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:34:00.391787"], ["updated_at", "2015-03-23 16:34:00.391787"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.392726' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.393432"], ["updated_at", "2015-03-23 16:34:00.393432"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.394891' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:34:00.395717"], ["updated_at", "2015-03-23 16:34:00.395717"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.396905' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:34:00.397574"], ["updated_at", "2015-03-23 16:34:00.397574"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.401860"], ["updated_at", "2015-03-23 16:34:00.401860"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.402980' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.403777"], ["updated_at", "2015-03-23 16:34:00.403777"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:34:00.405344"], ["updated_at", "2015-03-23 16:34:00.405344"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.406243' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.406860"], ["updated_at", "2015-03-23 16:34:00.406860"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.411076"], ["updated_at", "2015-03-23 16:34:00.411076"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.412205' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.413044"], ["updated_at", "2015-03-23 16:34:00.413044"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:34:00.423392"], ["updated_at", "2015-03-23 16:34:00.423392"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.424622' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:34:00.425478"], ["updated_at", "2015-03-23 16:34:00.425478"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:34:00.427085' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:34:00.427833"], ["updated_at", "2015-03-23 16:34:00.427833"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.729883"], ["updated_at", "2015-03-23 16:37:02.729883"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.737248' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.745207"], ["updated_at", "2015-03-23 16:37:02.745207"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:37:02.748138"], ["updated_at", "2015-03-23 16:37:02.748138"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.749350' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.750167"], ["updated_at", "2015-03-23 16:37:02.750167"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.753636"], ["updated_at", "2015-03-23 16:37:02.753636"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.754756' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.755516"], ["updated_at", "2015-03-23 16:37:02.755516"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.760794"], ["updated_at", "2015-03-23 16:37:02.760794"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.762025' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.762865"], ["updated_at", "2015-03-23 16:37:02.762865"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:37:02.764681"], ["updated_at", "2015-03-23 16:37:02.764681"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.765693' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.766343"], ["updated_at", "2015-03-23 16:37:02.766343"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.771907"], ["updated_at", "2015-03-23 16:37:02.771907"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.773066' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.773863"], ["updated_at", "2015-03-23 16:37:02.773863"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.775236' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.775891"], ["updated_at", "2015-03-23 16:37:02.775891"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.779150"], ["updated_at", "2015-03-23 16:37:02.779150"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.780304' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.781119"], ["updated_at", "2015-03-23 16:37:02.781119"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:37:02.782745"], ["updated_at", "2015-03-23 16:37:02.782745"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.783675' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.784309"], ["updated_at", "2015-03-23 16:37:02.784309"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.785634' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.786309"], ["updated_at", "2015-03-23 16:37:02.786309"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.787410' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.788075"], ["updated_at", "2015-03-23 16:37:02.788075"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.792248"], ["updated_at", "2015-03-23 16:37:02.792248"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.793439' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.794279"], ["updated_at", "2015-03-23 16:37:02.794279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:37:02.795887"], ["updated_at", "2015-03-23 16:37:02.795887"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.796814' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.797480"], ["updated_at", "2015-03-23 16:37:02.797480"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.798790' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.799440"], ["updated_at", "2015-03-23 16:37:02.799440"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.800499' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:37:02.801191"], ["updated_at", "2015-03-23 16:37:02.801191"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.805304"], ["updated_at", "2015-03-23 16:37:02.805304"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.806446' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.807251"], ["updated_at", "2015-03-23 16:37:02.807251"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.808643' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.809377"], ["updated_at", "2015-03-23 16:37:02.809377"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.819599"], ["updated_at", "2015-03-23 16:37:02.819599"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.820846' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.821718"], ["updated_at", "2015-03-23 16:37:02.821718"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:37:02.825688"], ["updated_at", "2015-03-23 16:37:02.825688"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.826963' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.827765"], ["updated_at", "2015-03-23 16:37:02.827765"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:37:02.829367"], ["updated_at", "2015-03-23 16:37:02.829367"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.830276' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:37:02.830895"], ["updated_at", "2015-03-23 16:37:02.830895"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.832201' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.832895"], ["updated_at", "2015-03-23 16:37:02.832895"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:37:02.833994' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:37:02.834669"], ["updated_at", "2015-03-23 16:37:02.834669"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.924645"], ["updated_at", "2015-03-23 16:38:21.924645"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.932288' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.940728"], ["updated_at", "2015-03-23 16:38:21.940728"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:38:21.943702"], ["updated_at", "2015-03-23 16:38:21.943702"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.944988' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.945835"], ["updated_at", "2015-03-23 16:38:21.945835"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.949458"], ["updated_at", "2015-03-23 16:38:21.949458"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.950705' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.951556"], ["updated_at", "2015-03-23 16:38:21.951556"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.957131"], ["updated_at", "2015-03-23 16:38:21.957131"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.958380' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.959222"], ["updated_at", "2015-03-23 16:38:21.959222"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:21.961185"], ["updated_at", "2015-03-23 16:38:21.961185"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.962285' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.962965"], ["updated_at", "2015-03-23 16:38:21.962965"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.964332' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:21.965121"], ["updated_at", "2015-03-23 16:38:21.965121"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.966320' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:21.967036"], ["updated_at", "2015-03-23 16:38:21.967036"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL
SQLite3::SQLException: no such column: succeed_at: SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.977651"], ["updated_at", "2015-03-23 16:38:21.977651"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.978961' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.979834"], ["updated_at", "2015-03-23 16:38:21.979834"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL[0m
SQLite3::SQLException: no such column: succeed_at: SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.983761"], ["updated_at", "2015-03-23 16:38:21.983761"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.985000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.985852"], ["updated_at", "2015-03-23 16:38:21.985852"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.987336' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:21.988066"], ["updated_at", "2015-03-23 16:38:21.988066"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL
SQLite3::SQLException: no such column: succeed_at: SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeed_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:21.992000"], ["updated_at", "2015-03-23 16:38:21.992000"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.993242' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.994087"], ["updated_at", "2015-03-23 16:38:21.994087"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:21.995772"], ["updated_at", "2015-03-23 16:38:21.995772"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.996749' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:21.997479"], ["updated_at", "2015-03-23 16:38:21.997479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:21.998883' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:21.999587"], ["updated_at", "2015-03-23 16:38:21.999587"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.000787' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:38:22.001542"], ["updated_at", "2015-03-23 16:38:22.001542"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:22.006634"], ["updated_at", "2015-03-23 16:38:22.006634"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.007850' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:22.008684"], ["updated_at", "2015-03-23 16:38:22.008684"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:22.010420"], ["updated_at", "2015-03-23 16:38:22.010420"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.011403' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:22.012082"], ["updated_at", "2015-03-23 16:38:22.012082"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.013522' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:22.014258"], ["updated_at", "2015-03-23 16:38:22.014258"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.015438' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:22.016157"], ["updated_at", "2015-03-23 16:38:22.016157"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:22.020338"], ["updated_at", "2015-03-23 16:38:22.020338"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.021582' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:22.022424"], ["updated_at", "2015-03-23 16:38:22.022424"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.023903' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:22.024634"], ["updated_at", "2015-03-23 16:38:22.024634"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:22.028419"], ["updated_at", "2015-03-23 16:38:22.028419"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.029670' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:22.030508"], ["updated_at", "2015-03-23 16:38:22.030508"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:22.032192"], ["updated_at", "2015-03-23 16:38:22.032192"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:22.033202' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:22.033901"], ["updated_at", "2015-03-23 16:38:22.033901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.173026"], ["updated_at", "2015-03-23 16:38:45.173026"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.180232' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.188290"], ["updated_at", "2015-03-23 16:38:45.188290"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:38:45.191100"], ["updated_at", "2015-03-23 16:38:45.191100"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.192299' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.193112"], ["updated_at", "2015-03-23 16:38:45.193112"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.196545"], ["updated_at", "2015-03-23 16:38:45.196545"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.197754' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.198532"], ["updated_at", "2015-03-23 16:38:45.198532"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.203812"], ["updated_at", "2015-03-23 16:38:45.203812"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.205002' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.205804"], ["updated_at", "2015-03-23 16:38:45.205804"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:45.207730"], ["updated_at", "2015-03-23 16:38:45.207730"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.208747' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.209441"], ["updated_at", "2015-03-23 16:38:45.209441"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.215053"], ["updated_at", "2015-03-23 16:38:45.215053"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.216212' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.217042"], ["updated_at", "2015-03-23 16:38:45.217042"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.218461' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.219140"], ["updated_at", "2015-03-23 16:38:45.219140"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.222235"], ["updated_at", "2015-03-23 16:38:45.222235"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.223433' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.224450"], ["updated_at", "2015-03-23 16:38:45.224450"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:45.226155"], ["updated_at", "2015-03-23 16:38:45.226155"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.227083' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.227725"], ["updated_at", "2015-03-23 16:38:45.227725"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.229050' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.229730"], ["updated_at", "2015-03-23 16:38:45.229730"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.230821' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.231492"], ["updated_at", "2015-03-23 16:38:45.231492"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.235656"], ["updated_at", "2015-03-23 16:38:45.235656"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.236812' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.237625"], ["updated_at", "2015-03-23 16:38:45.237625"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:45.239235"], ["updated_at", "2015-03-23 16:38:45.239235"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.240200' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.240853"], ["updated_at", "2015-03-23 16:38:45.240853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.242188' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.242842"], ["updated_at", "2015-03-23 16:38:45.242842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.243942' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:38:45.244611"], ["updated_at", "2015-03-23 16:38:45.244611"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.248807"], ["updated_at", "2015-03-23 16:38:45.248807"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.250020' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.250801"], ["updated_at", "2015-03-23 16:38:45.250801"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.252155' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.252839"], ["updated_at", "2015-03-23 16:38:45.252839"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.263133"], ["updated_at", "2015-03-23 16:38:45.263133"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.264386' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.265253"], ["updated_at", "2015-03-23 16:38:45.265253"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:38:45.269078"], ["updated_at", "2015-03-23 16:38:45.269078"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.270223' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.271008"], ["updated_at", "2015-03-23 16:38:45.271008"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:38:45.272814"], ["updated_at", "2015-03-23 16:38:45.272814"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.273874' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:38:45.274514"], ["updated_at", "2015-03-23 16:38:45.274514"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.275801' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.276490"], ["updated_at", "2015-03-23 16:38:45.276490"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:38:45.277623' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:38:45.278308"], ["updated_at", "2015-03-23 16:38:45.278308"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.347244"], ["updated_at", "2015-03-23 16:39:12.347244"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.354678' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.362672"], ["updated_at", "2015-03-23 16:39:12.362672"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:39:12.365517"], ["updated_at", "2015-03-23 16:39:12.365517"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.366723' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.367523"], ["updated_at", "2015-03-23 16:39:12.367523"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.370979"], ["updated_at", "2015-03-23 16:39:12.370979"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.372153' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.372956"], ["updated_at", "2015-03-23 16:39:12.372956"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.378281"], ["updated_at", "2015-03-23 16:39:12.378281"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.379477' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.380280"], ["updated_at", "2015-03-23 16:39:12.380280"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:39:12.382188"], ["updated_at", "2015-03-23 16:39:12.382188"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.383286' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.383916"], ["updated_at", "2015-03-23 16:39:12.383916"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.389745"], ["updated_at", "2015-03-23 16:39:12.389745"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.390870' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.391696"], ["updated_at", "2015-03-23 16:39:12.391696"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.393136' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.393832"], ["updated_at", "2015-03-23 16:39:12.393832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.397113"], ["updated_at", "2015-03-23 16:39:12.397113"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.398428' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.399245"], ["updated_at", "2015-03-23 16:39:12.399245"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:39:12.400832"], ["updated_at", "2015-03-23 16:39:12.400832"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.401801' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.402446"], ["updated_at", "2015-03-23 16:39:12.402446"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.403750' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.404432"], ["updated_at", "2015-03-23 16:39:12.404432"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.405575' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.406247"], ["updated_at", "2015-03-23 16:39:12.406247"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.1ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.410445"], ["updated_at", "2015-03-23 16:39:12.410445"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.411587' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.412382"], ["updated_at", "2015-03-23 16:39:12.412382"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:39:12.413992"], ["updated_at", "2015-03-23 16:39:12.413992"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.414921' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.415569"], ["updated_at", "2015-03-23 16:39:12.415569"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.416909' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.417600"], ["updated_at", "2015-03-23 16:39:12.417600"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.418742' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:39:12.419414"], ["updated_at", "2015-03-23 16:39:12.419414"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.423577"], ["updated_at", "2015-03-23 16:39:12.423577"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.424696' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.425538"], ["updated_at", "2015-03-23 16:39:12.425538"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.426944' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.427607"], ["updated_at", "2015-03-23 16:39:12.427607"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.437902"], ["updated_at", "2015-03-23 16:39:12.437902"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.439154' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.439999"], ["updated_at", "2015-03-23 16:39:12.439999"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:39:12.443753"], ["updated_at", "2015-03-23 16:39:12.443753"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.444915' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.445779"], ["updated_at", "2015-03-23 16:39:12.445779"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:39:12.447689"], ["updated_at", "2015-03-23 16:39:12.447689"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.448639' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:39:12.449319"], ["updated_at", "2015-03-23 16:39:12.449319"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.450691' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.451422"], ["updated_at", "2015-03-23 16:39:12.451422"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:39:12.452587' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:39:12.453331"], ["updated_at", "2015-03-23 16:39:12.453331"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.perma_id = snaps_tags.record_perma_id and snaps_tags.record_type = 'posts' and snaps_tags.tag = 'published' and snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.855728"], ["updated_at", "2015-03-23 16:40:34.855728"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.863053' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.871081"], ["updated_at", "2015-03-23 16:40:34.871081"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:40:34.873919"], ["updated_at", "2015-03-23 16:40:34.873919"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.875122' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.875888"], ["updated_at", "2015-03-23 16:40:34.875888"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.879496"], ["updated_at", "2015-03-23 16:40:34.879496"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.880774' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.881588"], ["updated_at", "2015-03-23 16:40:34.881588"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.887072"], ["updated_at", "2015-03-23 16:40:34.887072"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.888247' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.889052"], ["updated_at", "2015-03-23 16:40:34.889052"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:40:34.890636"], ["updated_at", "2015-03-23 16:40:34.890636"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.891584' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.892194"], ["updated_at", "2015-03-23 16:40:34.892194"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.897811"], ["updated_at", "2015-03-23 16:40:34.897811"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.898973' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.899751"], ["updated_at", "2015-03-23 16:40:34.899751"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.901148' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.901830"], ["updated_at", "2015-03-23 16:40:34.901830"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.912027"], ["updated_at", "2015-03-23 16:40:34.912027"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.913294' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.914112"], ["updated_at", "2015-03-23 16:40:34.914112"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:40:34.915726"], ["updated_at", "2015-03-23 16:40:34.915726"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.916666' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.917305"], ["updated_at", "2015-03-23 16:40:34.917305"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.918628' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.919303"], ["updated_at", "2015-03-23 16:40:34.919303"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.920584' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.921302"], ["updated_at", "2015-03-23 16:40:34.921302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.925917"], ["updated_at", "2015-03-23 16:40:34.925917"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.927028' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.927818"], ["updated_at", "2015-03-23 16:40:34.927818"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.931742"], ["updated_at", "2015-03-23 16:40:34.931742"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.932852' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.933664"], ["updated_at", "2015-03-23 16:40:34.933664"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.935040' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.935707"], ["updated_at", "2015-03-23 16:40:34.935707"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.938781"], ["updated_at", "2015-03-23 16:40:34.938781"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.939904' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.940662"], ["updated_at", "2015-03-23 16:40:34.940662"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:40:34.942261"], ["updated_at", "2015-03-23 16:40:34.942261"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.943175' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.943790"], ["updated_at", "2015-03-23 16:40:34.943790"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.945073' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.945734"], ["updated_at", "2015-03-23 16:40:34.945734"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.946842' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:40:34.947472"], ["updated_at", "2015-03-23 16:40:34.947472"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:40:34.951509"], ["updated_at", "2015-03-23 16:40:34.951509"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.952777' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.953730"], ["updated_at", "2015-03-23 16:40:34.953730"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:40:34.955500"], ["updated_at", "2015-03-23 16:40:34.955500"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.956444' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:40:34.957108"], ["updated_at", "2015-03-23 16:40:34.957108"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.958461' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.959153"], ["updated_at", "2015-03-23 16:40:34.959153"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:40:34.960321' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:40:34.961028"], ["updated_at", "2015-03-23 16:40:34.961028"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.194485"], ["updated_at", "2015-03-23 16:42:09.194485"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.201890' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.209933"], ["updated_at", "2015-03-23 16:42:09.209933"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2015-03-23 16:42:09.212792"], ["updated_at", "2015-03-23 16:42:09.212792"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.214028' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.214798"], ["updated_at", "2015-03-23 16:42:09.214798"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.218259"], ["updated_at", "2015-03-23 16:42:09.218259"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.219403' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.220170"], ["updated_at", "2015-03-23 16:42:09.220170"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.225498"], ["updated_at", "2015-03-23 16:42:09.225498"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.226668' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.227454"], ["updated_at", "2015-03-23 16:42:09.227454"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:42:09.229408"], ["updated_at", "2015-03-23 16:42:09.229408"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.230467' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.231089"], ["updated_at", "2015-03-23 16:42:09.231089"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.232395' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.233101"], ["updated_at", "2015-03-23 16:42:09.233101"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.234222' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.234871"], ["updated_at", "2015-03-23 16:42:09.234871"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.1ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.240134"], ["updated_at", "2015-03-23 16:42:09.240134"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.241319' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.242120"], ["updated_at", "2015-03-23 16:42:09.242120"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.243518' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.244284"], ["updated_at", "2015-03-23 16:42:09.244284"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.247687"], ["updated_at", "2015-03-23 16:42:09.247687"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.248840' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.249666"], ["updated_at", "2015-03-23 16:42:09.249666"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:42:09.251225"], ["updated_at", "2015-03-23 16:42:09.251225"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.252149' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.252776"], ["updated_at", "2015-03-23 16:42:09.252776"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.254119' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.254790"], ["updated_at", "2015-03-23 16:42:09.254790"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.255896' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2015-03-23 16:42:09.256541"], ["updated_at", "2015-03-23 16:42:09.256541"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.260612"], ["updated_at", "2015-03-23 16:42:09.260612"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.261790' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.262583"], ["updated_at", "2015-03-23 16:42:09.262583"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:42:09.264147"], ["updated_at", "2015-03-23 16:42:09.264147"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.265110' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.265747"], ["updated_at", "2015-03-23 16:42:09.265747"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.270017"], ["updated_at", "2015-03-23 16:42:09.270017"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.271166' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.271949"], ["updated_at", "2015-03-23 16:42:09.271949"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.282345"], ["updated_at", "2015-03-23 16:42:09.282345"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.283558' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.284395"], ["updated_at", "2015-03-23 16:42:09.284395"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.285858' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.286555"], ["updated_at", "2015-03-23 16:42:09.286555"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.290141"], ["updated_at", "2015-03-23 16:42:09.290141"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.291262' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.292031"], ["updated_at", "2015-03-23 16:42:09.292031"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:42:09.293643"], ["updated_at", "2015-03-23 16:42:09.293643"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.294575' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.295183"], ["updated_at", "2015-03-23 16:42:09.295183"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.296470' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.297169"], ["updated_at", "2015-03-23 16:42:09.297169"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.298258' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.298911"], ["updated_at", "2015-03-23 16:42:09.298911"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.2ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2015-03-23 16:42:09.303859"], ["updated_at", "2015-03-23 16:42:09.303859"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.305072' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:42:09.305872"], ["updated_at", "2015-03-23 16:42:09.305872"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:42:09.307263' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:42:09.307922"], ["updated_at", "2015-03-23 16:42:09.307922"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.1ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2015-03-23 16:54:41.896502"], ["updated_at", "2015-03-23 16:54:41.896502"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:54:41.897518' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2015-03-23 16:54:41.898138"], ["updated_at", "2015-03-23 16:54:41.898138"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2015-03-23 16:54:41.899428' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2015-03-23 16:54:41.900113"], ["updated_at", "2015-03-23 16:54:41.900113"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-17 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-17 23:00:00.000000"], ["updated_at", "2012-12-17 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSections (20150323173024)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "sections" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "post_id" integer, "perma_id" integer, "title" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150323173024"]]
  [1m[36m (36.4ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("sections"."perma_id") FROM "sections"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("sections"."perma_id") FROM "sections"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' AND snaps_tags.succeeded_at IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("sections"."perma_id") FROM "sections"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts"
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published'[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."perma_id" = ?  [["perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."perma_id" = ?  [["perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("sections"."perma_id") FROM "sections"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags ON posts.id = snaps_tags.record_id and snaps_tags.record_type = 'posts' AND snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."perma_id" = ?[0m  [["perma_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 2], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'foo' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("sections"."perma_id") FROM "sections"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSection Load (0.0ms)[0m  [1mSELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?[0m  [["post_id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'published' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = 'draft' AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."record_type" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["record_perma_id", 1], ["record_type", "posts"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."perma_id" = ?  [["perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"]]
SQLite3::SQLException: no such column: snaps_tags.perma_id: UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."perma_id" = 1 AND "snaps_tags"."succeeded_at" IS NULL
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 2], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 2]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 2], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."record_perma_id" = ? LIMIT 1  [["record_perma_id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "foo"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "foo"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSnaps::Tag Load (0.0ms)[0m  SELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2013-01-14 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 3], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2013-01-14 23:00:00.000000"], ["updated_at", "2013-01-14 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSnaps::Tag Load (0.0ms)[0m  [1mSELECT  "snaps_tags".* FROM "snaps_tags" WHERE "snaps_tags"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."perma_id" = ?[0m  [["perma_id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "zwei titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts"[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts"  ORDER BY "posts"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "ein titel"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("sections"."perma_id") FROM "sections"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "sections" ("title", "post_id", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "section"], ["post_id", 1], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "ein titel"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "sections" ("post_id", "perma_id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["post_id", 2], ["perma_id", 1], ["title", "section"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSection Load (0.0ms)[0m  SELECT "sections".* FROM "sections" WHERE "sections"."post_id" = ?  [["post_id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'other' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT MAX("posts"."perma_id") FROM "posts"[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "published"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPost Load (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT  "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published' WHERE (snaps_tags.succeeded_at IS NULL)  ORDER BY "posts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT MAX("posts"."perma_id") FROM "posts"
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "posts" ("title", "body", "perma_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["title", "MyString"], ["body", "MyText"], ["perma_id", 1], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "posts" ("perma_id", "title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["perma_id", 1], ["title", "MyString"], ["body", "MyText"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "draft"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "draft"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 1], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "snaps_tags" SET "succeeded_at" = '2012-12-31 23:00:00.000000' WHERE "snaps_tags"."tag" = ? AND "snaps_tags"."record_perma_id" = ? AND "snaps_tags"."succeeded_at" IS NULL[0m  [["tag", "published"], ["record_perma_id", 1]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "snaps_tags" ("record_id", "record_perma_id", "record_type", "tag", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["record_id", 2], ["record_perma_id", 1], ["record_type", "posts"], ["tag", "published"], ["created_at", "2012-12-31 23:00:00.000000"], ["updated_at", "2012-12-31 23:00:00.000000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPost Load (0.0ms)[0m  SELECT "posts".* FROM "posts" INNER JOIN snaps_tags
        ON posts.id = snaps_tags.record_id
        AND snaps_tags.record_type = 'posts'
        AND snaps_tags.tag = 'published'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
